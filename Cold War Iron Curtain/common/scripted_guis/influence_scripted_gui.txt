scripted_gui = {

	domestic_influence_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "domestic_influence_diplo"
		
		visible = {
            always = yes
		}
		
		effects = {
			domestic_influence_diplo_header_click = {
				set_variable = { influence_menu_show = 1 } 
				set_variable = { temp_check = ROOT.id } 
			}	
		}
		ai_enabled = {
            always = yes
        }

        ai_check = {
			
		}
        
        ai_test_interval = 1000
        ai_test_variance = 0.3
		
		
		ai_max_weight_taken_per_test = 1
		
		
		ai_weights = {
			domestic_influence_diplo_header = {
				weight = 1
				ai_will_do = {
					factor = 1
				}
			}
		}
	}
	position_1_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_1_diplo"
		
		visible = {
            check_variable = { total_influencers > 0 }
		}
		
		effects = { }
	}
	position_2_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_2_diplo"
		
		visible = {
            check_variable = { total_influencers > 1 }
		}
		
		effects = { }
	}
	position_3_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_3_diplo"
		
		visible = {
            check_variable = { total_influencers > 2 }
		}
		
		effects = { }
	}
	position_4_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_4_diplo"
		
		visible = {
            check_variable = { total_influencers > 3 }
		}
		
		effects = { }
	}
	position_5_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_5_diplo"
		
		visible = {
            check_variable = { total_influencers > 4 }
		}
		
		effects = { }
	}
	position_6_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_6_diplo"
		
		visible = {
            check_variable = { total_influencers > 5 }
		}
		
		effects = { }
	}
	position_7_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_7_diplo"
		
		visible = {
            check_variable = { total_influencers > 6 }
		}
		
		effects = { }
	}
	
	domestic_influence_diplo_menu = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "domestic_influence_diplo_menu"
		
		visible = {
           check_variable = { influence_menu_show = 1 }
		   OR = {
				check_variable = { influencer1 = temp_check }
				check_variable = { influencer2 = temp_check }
				check_variable = { influencer3 = temp_check }
				check_variable = { influencer4 = temp_check }
				check_variable = { influencer5 = temp_check }
				check_variable = { influencer6 = temp_check }
				check_variable = { influencer7 = temp_check }
		   }
		}
		
		effects = {
			domestic_influence_diplo_menu_exit_click = {
				set_variable = { influence_menu_show = 0 } 
			}	
			#Positive Actions
			economic_investments_click = {		
				add_ideas = foriegn_economic_investments
				ROOT = { add_political_power = -300 }
				set_recent_action_check = yes
				fifty_point_influence_gain = yes
				recalculate_influence = yes
			}
			infrastructure_investments_click = {		
				add_ideas = foriegn_infrastructure_investments
				ROOT = { add_political_power = -150 }
				set_recent_action_check = yes
				twenty_five_point_influence_gain = yes
				recalculate_influence = yes
			}
			send_infantry_equipment_click = {	
				set_recent_action_check = yes
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 25000
				}
				ROOT = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -25000
					}			
				}			
				fifty_point_influence_gain = yes
				recalculate_influence = yes
			}
			send_advanced_military_equipment_click = {	
				set_recent_action_check = yes
				add_equipment_to_stockpile = {
					type = mbt_equipment
					amount = 300
				}
				ROOT = {
					add_equipment_to_stockpile = {
						type = mbt_equipment
						amount = -300
					}			
				}
				add_equipment_to_stockpile = {
					type = jet_multirole_equipment
					amount = 60
				}
				ROOT = {
					add_equipment_to_stockpile = {
						type = jet_multirole_equipment
						amount = -60
					}			
				}

				hundred_point_influence_gain = yes
				recalculate_influence = yes
			}
			defense_treaty_click = {	
				set_recent_action_check = yes
				ROOT = {
					give_guarantee = PREV
				}
				give_military_access = ROOT
				ROOT = { add_political_power = -500 }
				hundred_point_influence_gain = yes
				set_recent_action_check_defense_treaty = yes
				recalculate_influence = yes			
			}
			civil_war_intevention_click = {		
				set_recent_action_check = yes
				random_other_country = { 
					limit = {
						has_civil_war = yes
						original_tag = PREV
						NOT = { tag = PREV }
					}
					set_variable = { ROOT.war_target = THIS.id }
				}	
				ROOT = {
					declare_war_on = {
						target = var:war_target
						type = annex_everything
					}
				}
				ROOT = {
					add_threat = 5
				}
				give_military_access = ROOT
				ROOT = { add_political_power = -1000 }
				clear_variable = war_target
				set_recent_action_check_civil_war = yes
				three_hundred_point_influence_gain = yes
				recalculate_influence = yes				
			}
			raid_insurgent_bases_influence_click = {	
				set_recent_action_check = yes
				ROOT = {
					add_manpower = -100
					add_political_power = -500
					army_experience = 20
				}
				every_owned_state = {
					limit = {
						has_state_flag = active_insurgency
					}
					random_list = {
						50 = {
								subtract_from_variable = {
									var = insurgency_strength
									value = 3
								}
							}
						50 = {
							subtract_from_variable = {
								var = insurgency_strength
								value = 6
							}
						}
					}
				}
				hundred_point_influence_gain = yes
				recalculate_influence = yes					
			}
			trade_agreement_click = {
				set_recent_action_check = yes
				sign_trade_agreement_inv = yes
				sign_trade_agreement = yes	
				ROOT = { 
					add_political_power = -500
				}
				three_hundred_point_influence_gain = yes
				set_recent_action_check_trade_deal = yes
				recalculate_influence = yes				
			}
			#Negative Actions
			political_influence_click = {
				set_recent_action_check = yes
				influence_nation = yes
				ROOT = { 
					add_political_power = -100
				}
				hundred_point_influence_cost = yes
				recalculate_influence = yes				
			}
			attempt_political_coup_click = {
				set_recent_action_check = yes
				country_event = influence_coup.1
			}
			supply_insurgent_bases_influence_click = {
				set_recent_action_check = yes
				ROOT = {
					add_manpower = -100
					add_political_power = -500
					army_experience = 20
				}
				every_owned_state = {
					limit = {
						has_state_flag = active_insurgency
					}
					subtract_from_variable = {
						var = insurgency_strength
						value = -3
					}
				}
				hundred_point_influence_cost = yes
				recalculate_influence = yes					
			}
		}
		triggers = {
			economic_investments_click_enabled = {
				NOT = { has_idea = foriegn_economic_investments }
				no_recent_action_in_target = yes
			}
			infrastructure_investments_click_enabled = {
				NOT = { has_idea = foriegn_infrastructure_investments }
				no_recent_action_in_target = yes
			}
			send_infantry_equipment_click_enabled = {
				no_recent_action_in_target = yes
			}
			send_advanced_military_equipment_click_enabled = {
				not_signed_trade_deal = yes
				no_recent_action_in_target = yes
			}
			defense_treaty_click_enabled = {
				not_signed_defense_treaty = yes
				no_recent_action_in_target = yes
			}
			civil_war_intevention_click_enabled = {
				not_intervened_already = yes
				has_civil_war = yes
			}
			raid_insurgent_bases_influence_click_enabled = {
				no_recent_action_in_target = yes
				any_owned_state = {
					is_owned_and_controlled_by = THIS
					has_state_flag = active_insurgency		
					has_state_flag = anti_colonial_insurgency
				}
			}
			trade_agreement_click_enabled = {
				not_signed_trade_deal = yes
				no_recent_action_in_target = yes
			}
			political_influence_click_enabled = {
				no_recent_action_in_target = yes
			}
			attempt_political_coup_click_enabled = {
				no_recent_action_in_target = yes
			}
			supply_insurgent_bases_influence_click_enabled = {
				no_recent_action_in_target = yes
				any_owned_state = {
					is_owned_and_controlled_by = THIS
					has_state_flag = active_insurgency		
					has_state_flag = anti_colonial_insurgency
				}
			}
		}
		ai_enabled = {
            always = yes
        }

        ai_check = {
            
        }
        
        ai_test_interval = 1500
        ai_test_variance = 0.3
		
		ai_check_scope = {
		   #OR = {
			#	check_variable = { influencer1 = temp_check }
			#	check_variable = { influencer2 = temp_check }
			#	check_variable = { influencer3 = temp_check }
			#	check_variable = { influencer4 = temp_check }
			#	check_variable = { influencer5 = temp_check }
			#	check_variable = { influencer6 = temp_check }
			#	check_variable = { influencer7 = temp_check }
		   #}			
		}                      
        ai_max_weight_taken_per_test = 1
		
        ai_weights = {

			economic_investments_click = {
				ai_will_do = {
					factor = 1
					modifier = {
						has_war = no
						add = 10
					}
				}
			}        
			infrastructure_investments_click = {
				ai_will_do = {
					factor = 1
					modifier = {
						has_war = no
						add = 10
					}
				}
			}     
			send_infantry_equipment_click = {
				ai_will_do = {
					factor = 1
					modifier = {
						has_war = no
						add = 10
					}
				}
			}     
			defense_treaty_click = {
				ai_will_do = {
					factor = 1
					modifier = {
						has_war = no
						add = 10
					}
				}
			}       
			civil_war_intevention_click = {
				ai_will_do = {
					factor = 1
					modifier = {
						has_civil_war = urd
						add = 100
					}
				}
			}     
			trade_agreement_click = {
				ai_will_do = {
					factor = 1
					modifier = {
						has_war = no
						add = 10
					}
				}
			}      	
		}
	}
}

