influence_refresh = {
	#Clears Current Total + Failsafe
	clear_variable = influence_total
	clear_variable = influencer1_ammount_calc
	clear_variable = influencer2_ammount_calc
	clear_variable = influencer3_ammount_calc
	clear_variable = influencer4_ammount_calc
	clear_variable = influencer5_ammount_calc
	clear_variable = influencer6_ammount_calc
	clear_variable = influencer7_ammount_calc
	clear_variable = domestic_influence_ammount_calc

	#Set Variables for Calc Variant
	set_variable = { influencer1_ammount_calc = influencer1_ammount } 
	set_variable = { influencer2_ammount_calc = influencer2_ammount } 
	set_variable = { influencer3_ammount_calc = influencer3_ammount } 
	set_variable = { influencer4_ammount_calc = influencer4_ammount } 
	set_variable = { influencer5_ammount_calc = influencer5_ammount } 
	set_variable = { influencer6_ammount_calc = influencer6_ammount } 
	set_variable = { influencer7_ammount_calc = influencer7_ammount } 
	set_variable = { domestic_influence_ammount_calc = domestic_influence_ammount } 
	
	
	#Influence Total Addition Begins
	add_to_variable = {
		var = influencer1_ammount_calc
		value = influence_total
	}
	add_to_variable = {
		var = influencer2_ammount_calc
		value = influence_total
	}
	add_to_variable = {
		var = influencer3_ammount_calc
		value = influence_total
	}
	add_to_variable = {
		var = influencer4_ammount_calc
		value = influence_total
	}
	add_to_variable = {
		var = influencer5_ammount_calc
		value = influence_total
	}
	add_to_variable = {
		var = influencer6_ammount_calc
		value = influence_total
	}
	add_to_variable = {
		var = influencer7_ammount_calc
		value = influence_total
	}
	add_to_variable = {
		var = domestic_influence_ammount_calc
		value = influence_total
	}
	#Total Established
	#
	#Begin Division
	if = {
		limit = {
			check_variable = {
				var = influencer1_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		divide_variable = {
			var = influencer1_ammount_calc
			value = influence_total
		}	
	}
	
	if = {
		limit = {
			check_variable = {
				var = influencer2_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		divide_variable = {
			var = influencer2_ammount_calc
			value = influence_total
		}	
	}	
	if = {
		limit = {
			check_variable = {
				var = influencer3_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		divide_variable = {
			var = influencer3_ammount_calc
			value = influence_total
		}	
	}
	if = {
		limit = {
			check_variable = {
				var = influencer4_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		divide_variable = {
			var = influencer4_ammount_calc
			value = influence_total
		}	
	}
	if = {
		limit = {
			check_variable = {
				var = influencer5_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		divide_variable = {
			var = influencer5_ammount_calc
			value = influence_total
		}	
	}	
	if = {
		limit = {
			check_variable = {
				var = influencer6_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		divide_variable = {
			var = influencer6_ammount_calc
			value = influence_total
		}	
	}
	if = {
		limit = {
			check_variable = {
				var = influencer7_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		divide_variable = {
			var = influencer7_ammount_calc
			value = influence_total
		}	
	}
	if = {
		limit = {
			check_variable = {
				var = domestic_influence_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		divide_variable = {
			var = domestic_influence_ammount_calc
			value = influence_total
		}	
	}
	#Percentages Established
	#
	#Multipy x100
	if = {
		limit = {
			check_variable = {
				var = influencer1_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		multiply_variable = {
			var = influencer1_ammount_calc
			value = 100
		}	
	}
	if = {
		limit = {
			check_variable = {
				var = influencer2_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		multiply_variable = {
			var = influencer2_ammount_calc
			value = 100
		}	
	}	
	if = {
		limit = {
			check_variable = {
				var = influencer3_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		multiply_variable = {
			var = influencer3_ammount_calc
			value = 100
		}	
	}
	if = {
		limit = {
			check_variable = {
				var = influencer4_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		multiply_variable = {
			var = influencer4_ammount_calc
			value = 100
		}	
	}
	if = {
		limit = {
			check_variable = {
				var = influencer5_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		multiply_variable = {
			var = influencer5_ammount_calc
			value = 100
		}	
	}
	if = {
		limit = {
			check_variable = {
				var = influencer6_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		multiply_variable = {
			var = influencer6_ammount_calc
			value = 100
		}	
	}
	if = {
		limit = {
			check_variable = {
				var = influencer7_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		multiply_variable = {
			var = influencer7_ammount_calc
			value = 100
		}	
	}
	if = {
		limit = {
			check_variable = {
				var = domestic_influence_ammount_calc
				value = 0.5
				compare = greater_than
			}		
		}
		multiply_variable = {
			var = domestic_influence_ammount_calc
			value = 100
		}	
	}
}

establish_influencer_tag = {
	if = {
		limit = {
			NOT = {
				has_variable = influencer1
			}	
		}
		set_variable = { influencer1 = ROOT.id }
		break = yes
	}
	if = {
		limit = {
			NOT = {
				has_variable = influencer2
			}	
		}
		set_variable = { influencer2 = ROOT.id }
		break = yes
	}	
	if = {
		limit = {
			NOT = {
				has_variable = influencer3
			}	
		}
		set_variable = { influencer3 = ROOT.id }
		break = yes
	}	
	if = {
		limit = {
			NOT = {
				has_variable = influencer4
			}	
		}
		set_variable = { influencer4 = ROOT.id }
		break = yes
	}	
	if = {
		limit = {
			NOT = {
				has_variable = influencer5
			}	
		}
		set_variable = { influencer5 = ROOT.id }
		break = yes
	}	
	if = {
		limit = {
			NOT = {
				has_variable = influencer6
			}	
		}
		set_variable = { influencer6 = ROOT.id }
		break = yes
	}	
	if = {
		limit = {
			NOT = {
				has_variable = influencer7
			}	
		}
		set_variable = { influencer7 = ROOT.id }
		break = yes
	}	
}